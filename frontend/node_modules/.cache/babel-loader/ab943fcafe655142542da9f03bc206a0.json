{"ast":null,"code":"import _objectSpread from\"/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._handleResponse=function(response){if(response.ok){return response.json();}else{return Promise.reject(response.status);}};this._address=options.address;this._token=options.token;this._cohortId=options.cohortId;}_createClass(Api,[{key:\"_makeRequest\",value:function _makeRequest(_ref){var endpoint=_ref.endpoint,method=_ref.method,body=_ref.body;var fetchInit={method:method,headers:{authorization:this._token,'Content-Type':'application/json'}};return fetch(\"\".concat(this._address,\"/\").concat(this._cohortId,\"/\").concat(endpoint),body?_objectSpread(_objectSpread({},fetchInit),{},{body:JSON.stringify(body)}):fetchInit).then(this._handleResponse);}},{key:\"getUserInfo\",value:function getUserInfo(){return this._makeRequest({endpoint:'users/me',method:'GET'});}},{key:\"getInitialCards\",value:function getInitialCards(){return this._makeRequest({endpoint:'cards',method:'GET'});}},{key:\"updateUserInfo\",value:function updateUserInfo(userInfo){return this._makeRequest({endpoint:'users/me',method:'PATCH',body:userInfo});}},{key:\"updateAvatar\",value:function updateAvatar(avatar){return this._makeRequest({endpoint:'users/me/avatar',method:'PATCH',body:avatar});}},{key:\"addNewCard\",value:function addNewCard(cardData){return this._makeRequest({endpoint:'cards',method:'POST',body:cardData});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardID,isLiked){return this._makeRequest({endpoint:\"cards/likes/\".concat(cardID),method:\"\".concat(isLiked?'DELETE':'PUT')});}},{key:\"deleteCard\",value:function deleteCard(cardID){return this._makeRequest({endpoint:\"cards/\".concat(cardID),method:'DELETE'});}}]);return Api;}();var api=new Api({address:'https://mesto.nomoreparties.co/v1',token:'c846985c-30b9-4d91-bdf7-4d0b3c99bbf7',cohortId:'cohort-24'});export default api;","map":{"version":3,"sources":["/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/src/utils/api.js"],"names":["Api","options","_handleResponse","response","ok","json","Promise","reject","status","_address","address","_token","token","_cohortId","cohortId","endpoint","method","body","fetchInit","headers","authorization","fetch","JSON","stringify","then","_makeRequest","userInfo","avatar","cardData","cardID","isLiked","api"],"mappings":"6gBAAMA,CAAAA,G,yBACJ,aAAYC,OAAZ,CAAqB,gCAMrBC,eANqB,CAMH,SAACC,QAAD,CAAc,CAC9B,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAQ,CAACE,IAAT,EAAP,CACD,CAFD,IAEO,CACL,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeJ,QAAQ,CAACK,MAAxB,CAAP,CACD,CACF,CAZoB,CACnB,KAAKC,QAAL,CAAgBR,OAAO,CAACS,OAAxB,CACA,KAAKC,MAAL,CAAcV,OAAO,CAACW,KAAtB,CACA,KAAKC,SAAL,CAAiBZ,OAAO,CAACa,QAAzB,CACD,C,4CAUD,2BAA0C,IAA1BC,CAAAA,QAA0B,MAA1BA,QAA0B,CAAhBC,MAAgB,MAAhBA,MAAgB,CAARC,IAAQ,MAARA,IAAQ,CACxC,GAAMC,CAAAA,SAAS,CAAG,CAChBF,MAAM,CAAEA,MADQ,CAEhBG,OAAO,CAAE,CACPC,aAAa,CAAE,KAAKT,MADb,CAEP,eAAgB,kBAFT,CAFO,CAAlB,CAOA,MAAOU,CAAAA,KAAK,WACP,KAAKZ,QADE,aACU,KAAKI,SADf,aAC4BE,QAD5B,EAEVE,IAAI,gCACGC,SADH,MACcD,IAAI,CAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf,CADpB,GAGFC,SALQ,CAAL,CAONM,IAPM,CAQL,KAAKtB,eARA,CAAP,CAUD,C,2BAED,sBAAe,CACb,MAAO,MAAKuB,YAAL,CAAkB,CACvBV,QAAQ,CAAE,UADa,CAEvBC,MAAM,CAAE,KAFe,CAAlB,CAAP,CAID,C,+BAED,0BAAmB,CACjB,MAAO,MAAKS,YAAL,CAAkB,CACvBV,QAAQ,CAAE,OADa,CAEvBC,MAAM,CAAE,KAFe,CAAlB,CAAP,CAID,C,8BAED,wBAAgBU,QAAhB,CAA0B,CACxB,MAAO,MAAKD,YAAL,CAAkB,CACvBV,QAAQ,CAAE,UADa,CAEvBC,MAAM,CAAE,OAFe,CAGvBC,IAAI,CAAES,QAHiB,CAAlB,CAAP,CAKD,C,4BAED,sBAAcC,MAAd,CAAsB,CACpB,MAAO,MAAKF,YAAL,CAAkB,CACvBV,QAAQ,CAAE,iBADa,CAEvBC,MAAM,CAAE,OAFe,CAGvBC,IAAI,CAAEU,MAHiB,CAAlB,CAAP,CAKD,C,0BAED,oBAAYC,QAAZ,CAAsB,CACpB,MAAO,MAAKH,YAAL,CAAkB,CACvBV,QAAQ,CAAE,OADa,CAEvBC,MAAM,CAAE,MAFe,CAGvBC,IAAI,CAAEW,QAHiB,CAAlB,CAAP,CAKD,C,oCAED,8BAAsBC,MAAtB,CAA8BC,OAA9B,CAAuC,CACrC,MAAO,MAAKL,YAAL,CAAkB,CACvBV,QAAQ,uBAAiBc,MAAjB,CADe,CAEvBb,MAAM,WAAKc,OAAO,CAAG,QAAH,CAAc,KAA1B,CAFiB,CAAlB,CAAP,CAID,C,0BAED,oBAAYD,MAAZ,CAAoB,CAClB,MAAO,MAAKJ,YAAL,CAAkB,CACvBV,QAAQ,iBAAWc,MAAX,CADe,CAEvBb,MAAM,CAAE,QAFe,CAAlB,CAAP,CAID,C,mBAGH,GAAMe,CAAAA,GAAG,CAAG,GAAI/B,CAAAA,GAAJ,CAAS,CACnBU,OAAO,CAAE,mCADU,CAEnBE,KAAK,CAAE,sCAFY,CAGnBE,QAAQ,CAAE,WAHS,CAAT,CAAZ,CAMA,cAAeiB,CAAAA,GAAf","sourcesContent":["class Api {\n  constructor(options) {\n    this._address = options.address;\n    this._token = options.token;\n    this._cohortId = options.cohortId;\n  }\n\n  _handleResponse = (response) => {\n    if (response.ok) {\n      return response.json();\n    } else {\n      return Promise.reject(response.status);\n    }\n  }\n\n  _makeRequest ({ endpoint, method, body }) {\n    const fetchInit = {\n      method: method,  \n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    };\n    return fetch (\n      `${this._address}/${this._cohortId}/${endpoint}`,\n      body ? \n        { ...fetchInit, body: JSON.stringify(body) } \n      : \n        fetchInit\n    )\n    .then (\n      this._handleResponse\n    )\n  }\n\n  getUserInfo () {\n    return this._makeRequest({\n      endpoint: 'users/me', \n      method: 'GET'\n    });\n  }\n  \n  getInitialCards () {\n    return this._makeRequest({\n      endpoint: 'cards', \n      method: 'GET'\n    });\n  }\n\n  updateUserInfo (userInfo) {\n    return this._makeRequest({\n      endpoint: 'users/me', \n      method: 'PATCH',\n      body: userInfo\n    });\n  }\n\n  updateAvatar (avatar) {\n    return this._makeRequest({\n      endpoint: 'users/me/avatar', \n      method: 'PATCH',\n      body: avatar\n    });\n  }\n\n  addNewCard (cardData) {\n    return this._makeRequest({\n      endpoint: 'cards',\n      method: 'POST',\n      body: cardData\n    });\n  }\n\n  changeLikeCardStatus (cardID, isLiked) {\n    return this._makeRequest({\n      endpoint: `cards/likes/${cardID}`, \n      method: `${isLiked ? 'DELETE' : 'PUT'}`\n    });\n  }\n\n  deleteCard (cardID) {\n    return this._makeRequest({\n      endpoint: `cards/${cardID}`, \n      method: 'DELETE'\n    });\n  }\n}\n\nconst api = new Api ({\n  address: 'https://mesto.nomoreparties.co/v1',\n  token: 'c846985c-30b9-4d91-bdf7-4d0b3c99bbf7',\n  cohortId: 'cohort-24',\n})\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}