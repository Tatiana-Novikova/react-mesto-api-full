{"ast":null,"code":"import _toConsumableArray from\"/Users/tatananovikova/Desktop/praktikum/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/tatananovikova/Desktop/praktikum/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import api from'./../utils/Api.js';import Header from'./Header/Header.js';import Main from'./Main/Main.js';import EditProfilePopup from'./EditProfilePopup/EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup/EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup/AddPlacePopup.js';import ImagePopup from'./ImagePopup/ImagePopup.js';import Footer from'./Footer/Footer.js';import{CurrentUserContext}from'./../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpened=_React$useState2[0],setIsEditAvatarPopupOpened=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpened=_React$useState4[0],setIsEditProfilePopupOpened=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddCardPopupOpened=_React$useState6[0],setIsAddCardPopupOpened=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),cards=_React$useState10[0],setCards=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];function handleEditAvatarClick(){setIsEditAvatarPopupOpened(true);};function handleEditProfileClick(){setIsEditProfilePopupOpened(true);};function handleAddCardClick(){setIsAddCardPopupOpened(true);};function handleCardClick(card){setSelectedCard(card);}function handleUpdateAvatar(avatar){api.updateAvatar(avatar).then(function(userData){setCurrentUser(userData);setIsEditAvatarPopupOpened(false);}).catch(function(error){return console.log(error);});;}function handleEditProfile(user){api.updateUserInfo(user).then(function(userData){setCurrentUser(userData);setIsEditProfilePopupOpened(false);}).catch(function(error){return console.log(error);});;}function handleAddPlaceSubmit(card){api.addNewCard(card).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));setIsAddCardPopupOpened(false);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.likeCard(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(error){return console.log(error);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(newCard){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});}).catch(function(error){return console.log(error);});}function closeAllPopups(){setIsEditAvatarPopupOpened(false);setIsEditProfilePopupOpened(false);setIsAddCardPopupOpened(false);setSelectedCard({});}React.useEffect(function(){api.getUserInfo().then(function(userData){setCurrentUser(userData);}).catch(function(error){return console.log(error);});},[]);React.useEffect(function(){api.getInitialCards().then(function(cardData){setCards(cardData);}).catch(function(error){return console.log(error);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddCard:handleAddCardClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpened,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpened,onClose:closeAllPopups,onEditProfile:handleEditProfile}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddCardPopupOpened,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{name:\"preview-card\",card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"sources":["/Users/tatananovikova/Desktop/praktikum/mesto-react/src/components/App.js"],"names":["React","api","Header","Main","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ImagePopup","Footer","CurrentUserContext","App","useState","isEditAvatarPopupOpened","setIsEditAvatarPopupOpened","isEditProfilePopupOpened","setIsEditProfilePopupOpened","isAddCardPopupOpened","setIsAddCardPopupOpened","selectedCard","setSelectedCard","cards","setCards","currentUser","setCurrentUser","handleEditAvatarClick","handleEditProfileClick","handleAddCardClick","handleCardClick","card","handleUpdateAvatar","avatar","updateAvatar","then","userData","catch","error","console","log","handleEditProfile","user","updateUserInfo","handleAddPlaceSubmit","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","likeCard","state","map","c","handleCardDelete","deleteCard","filter","closeAllPopups","useEffect","getUserInfo","getInitialCards","cardData"],"mappings":"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","sourcesContent":["import React from 'react';\nimport api from './../utils/Api.js';\nimport Header from './Header/Header.js';\nimport Main from './Main/Main.js';\nimport EditProfilePopup from './EditProfilePopup/EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup/EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup/AddPlacePopup.js';\nimport ImagePopup from './ImagePopup/ImagePopup.js';\nimport Footer from './Footer/Footer.js';\nimport { CurrentUserContext } from './../contexts/CurrentUserContext.js';\n\nfunction App() {\n  const [isEditAvatarPopupOpened, setIsEditAvatarPopupOpened] = React.useState(false);\n  const [isEditProfilePopupOpened, setIsEditProfilePopupOpened] = React.useState(false);\n  const [isAddCardPopupOpened, setIsAddCardPopupOpened] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useState('');\n  \n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpened(true);\n  };\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpened(true);\n  };\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpened(true);\n  };\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditAvatarPopupOpened(false);\n    })\n    .catch((error) => console.log(error));;\n  }\n\n  function handleEditProfile(user) {\n    api.updateUserInfo(user)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditProfilePopupOpened(false);\n    })\n    .catch((error) => console.log(error));;\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addNewCard(card)\n    .then ((newCard) => {\n      setCards([newCard, ...cards]);\n      setIsAddCardPopupOpened(false);\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.likeCard(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function handleCardDelete(card) {    \n    api.deleteCard(card._id)\n      .then((newCard) => {\n        setCards((cards) => cards.filter((c) => c._id !== card._id))\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function closeAllPopups () {\n    setIsEditAvatarPopupOpened(false);\n    setIsEditProfilePopupOpened(false);\n    setIsAddCardPopupOpened(false);\n    setSelectedCard({});\n  }\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch((error) => console.log(error));\n  }, [])\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((cardData) => {\n        setCards(cardData);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  return (\n    <div className=\"page\">\n      <div className=\"page-container\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header />\n          <Main \n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddCard={handleAddCardClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <EditAvatarPopup \n            isOpen={isEditAvatarPopupOpened} \n            onClose={closeAllPopups} \n            onUpdateAvatar={handleUpdateAvatar} \n          /> \n          <EditProfilePopup \n            isOpen={isEditProfilePopupOpened} \n            onClose={closeAllPopups} \n            onEditProfile={handleEditProfile} \n          />\n          <AddPlacePopup \n            isOpen={isAddCardPopupOpened} \n            onClose={closeAllPopups} \n            onAddPlace={handleAddPlaceSubmit} \n          />\n          <ImagePopup\n            name='preview-card'\n            card={selectedCard}\n            onClose={closeAllPopups}\n          />\n          <Footer />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}