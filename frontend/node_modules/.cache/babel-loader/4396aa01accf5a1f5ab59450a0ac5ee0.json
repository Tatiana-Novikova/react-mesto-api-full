{"ast":null,"code":"class Api {\n  constructor(options) {\n    this._handleResponse = response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        return Promise.reject(response.status);\n      }\n    };\n\n    this._address = options.address;\n    this._token = options.token;\n    this._cohortId = options.cohortId;\n  }\n\n  _makeRequest({\n    endpoint,\n    method,\n    body\n  }) {\n    const fetchInit = {\n      method: method,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    };\n    return fetch(`${this._address}/${this._cohortId}/${endpoint}`, body ? { ...fetchInit,\n      body: JSON.stringify(body)\n    } : fetchInit).then(this._handleResponse);\n  }\n\n  getUserInfo() {\n    return this._makeRequest({\n      endpoint: 'users/me',\n      method: 'GET'\n    });\n  }\n\n  getInitialCards() {\n    return this._makeRequest('cards', 'GET');\n  }\n\n  updateUserInfo(userInfo) {\n    return this._makeRequest('users/me', 'PATCH', userInfo);\n  }\n\n  updateAvatar(avatar) {\n    return this._makeRequest('users/me/avatar', 'PATCH', avatar);\n  }\n\n  addNewCard(cardData) {\n    return this._makeRequest({\n      endpoint: 'cards',\n      method: 'POST',\n      body: cardData\n    });\n  }\n\n  likeCard(cardID, isLiked) {\n    return this._makeRequest(`cards/likes/${cardID}`, isLiked ? 'DELETE' : 'PUT');\n  }\n\n  deleteCard(cardID) {\n    return this._makeRequest(`cards/${cardID}`, 'DELETE');\n  }\n\n}\n\nconst api = new Api({\n  address: 'https://mesto.nomoreparties.co/v1',\n  token: 'c846985c-30b9-4d91-bdf7-4d0b3c99bbf7',\n  cohortId: 'cohort-24'\n});\nexport default api;","map":{"version":3,"sources":["/Users/tatananovikova/Desktop/praktikum/mesto-react/src/utils/api.js"],"names":["Api","constructor","options","_handleResponse","response","ok","json","Promise","reject","status","_address","address","_token","token","_cohortId","cohortId","_makeRequest","endpoint","method","body","fetchInit","headers","authorization","fetch","JSON","stringify","then","getUserInfo","getInitialCards","updateUserInfo","userInfo","updateAvatar","avatar","addNewCard","cardData","likeCard","cardID","isLiked","deleteCard","api"],"mappings":"AAAA,MAAMA,GAAN,CAAU;AACRC,EAAAA,WAAW,CAACC,OAAD,EAAU;AAAA,SAMrBC,eANqB,GAMFC,QAAD,IAAc;AAC9B,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD,OAFD,MAEO;AACL,eAAOC,OAAO,CAACC,MAAR,CAAeJ,QAAQ,CAACK,MAAxB,CAAP;AACD;AACF,KAZoB;;AACnB,SAAKC,QAAL,GAAgBR,OAAO,CAACS,OAAxB;AACA,SAAKC,MAAL,GAAcV,OAAO,CAACW,KAAtB;AACA,SAAKC,SAAL,GAAiBZ,OAAO,CAACa,QAAzB;AACD;;AAUDC,EAAAA,YAAY,CAAE;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,MAAZ;AAAoBC,IAAAA;AAApB,GAAF,EAA8B;AACxC,UAAMC,SAAS,GAAG;AAChBF,MAAAA,MAAM,EAAEA,MADQ;AAEhBG,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,KAAKV,MADb;AAEP,wBAAgB;AAFT;AAFO,KAAlB;AAOA,WAAOW,KAAK,CACT,GAAE,KAAKb,QAAS,IAAG,KAAKI,SAAU,IAAGG,QAAS,EADrC,EAEVE,IAAI,GAAG,EAAE,GAAGC,SAAL;AAAgBD,MAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf;AAAtB,KAAH,GAAkDC,SAF5C,CAAL,CAGNM,IAHM,CAIL,KAAKvB,eAJA,CAAP;AAMD;;AAEDwB,EAAAA,WAAW,GAAI;AACb,WAAO,KAAKX,YAAL,CAAkB;AACvBC,MAAAA,QAAQ,EAAE,UADa;AAEvBC,MAAAA,MAAM,EAAE;AAFe,KAAlB,CAAP;AAID;;AAEDU,EAAAA,eAAe,GAAI;AACjB,WAAO,KAAKZ,YAAL,CAAkB,OAAlB,EAA2B,KAA3B,CAAP;AACD;;AAEDa,EAAAA,cAAc,CAAEC,QAAF,EAAY;AACxB,WAAO,KAAKd,YAAL,CAAkB,UAAlB,EAA8B,OAA9B,EAAuCc,QAAvC,CAAP;AACD;;AAEDC,EAAAA,YAAY,CAAEC,MAAF,EAAU;AACpB,WAAO,KAAKhB,YAAL,CAAkB,iBAAlB,EAAqC,OAArC,EAA8CgB,MAA9C,CAAP;AACD;;AAEDC,EAAAA,UAAU,CAAEC,QAAF,EAAY;AACpB,WAAO,KAAKlB,YAAL,CAAkB;AACvBC,MAAAA,QAAQ,EAAE,OADa;AAEvBC,MAAAA,MAAM,EAAE,MAFe;AAGvBC,MAAAA,IAAI,EAAEe;AAHiB,KAAlB,CAAP;AAKD;;AAEDC,EAAAA,QAAQ,CAAEC,MAAF,EAAUC,OAAV,EAAmB;AACzB,WAAO,KAAKrB,YAAL,CAAmB,eAAcoB,MAAO,EAAxC,EAA2CC,OAAO,GAAG,QAAH,GAAc,KAAhE,CAAP;AACD;;AAEDC,EAAAA,UAAU,CAAEF,MAAF,EAAU;AAClB,WAAO,KAAKpB,YAAL,CAAmB,SAAQoB,MAAO,EAAlC,EAAqC,QAArC,CAAP;AACD;;AAhEO;;AAmEV,MAAMG,GAAG,GAAG,IAAIvC,GAAJ,CAAS;AACnBW,EAAAA,OAAO,EAAE,mCADU;AAEnBE,EAAAA,KAAK,EAAE,sCAFY;AAGnBE,EAAAA,QAAQ,EAAE;AAHS,CAAT,CAAZ;AAMA,eAAewB,GAAf","sourcesContent":["class Api {\n  constructor(options) {\n    this._address = options.address;\n    this._token = options.token;\n    this._cohortId = options.cohortId;\n  }\n\n  _handleResponse = (response) => {\n    if (response.ok) {\n      return response.json();\n    } else {\n      return Promise.reject(response.status);\n    }\n  }\n\n  _makeRequest ({ endpoint, method, body }) {\n    const fetchInit = {\n      method: method,  \n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    };\n    return fetch (\n      `${this._address}/${this._cohortId}/${endpoint}`,\n      body ? { ...fetchInit, body: JSON.stringify(body) } : fetchInit)\n    .then (\n      this._handleResponse\n    )\n  }\n\n  getUserInfo () {\n    return this._makeRequest({\n      endpoint: 'users/me', \n      method: 'GET'\n    });\n  }\n  \n  getInitialCards () {\n    return this._makeRequest('cards', 'GET');\n  }\n\n  updateUserInfo (userInfo) {\n    return this._makeRequest('users/me', 'PATCH', userInfo);\n  }\n\n  updateAvatar (avatar) {\n    return this._makeRequest('users/me/avatar', 'PATCH', avatar);\n  }\n\n  addNewCard (cardData) {\n    return this._makeRequest({\n      endpoint: 'cards',\n      method: 'POST',\n      body: cardData\n    });\n  }\n\n  likeCard (cardID, isLiked) {\n    return this._makeRequest(`cards/likes/${cardID}`, isLiked ? 'DELETE' : 'PUT');\n  }\n\n  deleteCard (cardID) {\n    return this._makeRequest(`cards/${cardID}`, 'DELETE');\n  }\n}\n\nconst api = new Api ({\n  address: 'https://mesto.nomoreparties.co/v1',\n  token: 'c846985c-30b9-4d91-bdf7-4d0b3c99bbf7',\n  cohortId: 'cohort-24',\n})\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}