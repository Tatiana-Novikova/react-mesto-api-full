{"ast":null,"code":"import _toConsumableArray from\"/Users/tatananovikova/Desktop/praktikum/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/tatananovikova/Desktop/praktikum/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import api from'../utils/api.js';import Header from'./Header.js';import Main from'./Main.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import DeletePlacePopup from'./DeletePlacePopup.js';import ImagePopup from'./ImagePopup.js';import Footer from'./Footer.js';import{CurrentUserContext}from'./../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpened=_React$useState2[0],setIsEditAvatarPopupOpened=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpened=_React$useState4[0],setIsEditProfilePopupOpened=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddCardPopupOpened=_React$useState6[0],setIsAddCardPopupOpened=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isDeleteCardPopupOpened=_React$useState8[0],setIsDeleteCardPopupOpened=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];function handleEditAvatarClick(){setIsEditAvatarPopupOpened(true);}function handleEditProfileClick(){setIsEditProfilePopupOpened(true);}function handleAddCardClick(){setIsAddCardPopupOpened(true);}function handleCardClick(card){setSelectedCard(card);}function handleDeleteCardClick(){setIsDeleteCardPopupOpened(true);}function handleUpdateAvatar(avatar){api.updateAvatar(avatar).then(function(userData){setCurrentUser(userData);setIsEditAvatarPopupOpened(false);}).catch(function(error){return console.log(error);});;}function handleEditProfile(user){api.updateUserInfo(user).then(function(userData){setCurrentUser(userData);setIsEditProfilePopupOpened(false);}).catch(function(error){return console.log(error);});;}function handleAddPlaceSubmit(card){api.addNewCard(card).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));setIsAddCardPopupOpened(false);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.likeCard(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(error){return console.log(error);});}function handleDeletePlaceSubmit(event,card){api.deleteCard(event.target.card._id).then(function(newCard){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});}).catch(function(error){return console.log(error);});}function closeAllPopups(){setIsEditAvatarPopupOpened(false);setIsEditProfilePopupOpened(false);setIsAddCardPopupOpened(false);setIsDeleteCardPopupOpened(false);setSelectedCard({});}React.useEffect(function(){Promise.all([api.getUserInfo(),api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),userData=_ref2[0],cardData=_ref2[1];setCurrentUser(userData);setCards(cardData);}).catch(function(error){return console.log(error);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddCard:handleAddCardClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteCardClick}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpened,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpened,onClose:closeAllPopups,onEditProfile:handleEditProfile}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddCardPopupOpened,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(DeletePlacePopup,{isOpen:isDeleteCardPopupOpened,onClose:closeAllPopups,onDeletePlace:handleDeletePlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{name:\"preview-card\",card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"sources":["/Users/tatananovikova/Desktop/praktikum/mesto-react/src/components/App.js"],"names":["React","api","Header","Main","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeletePlacePopup","ImagePopup","Footer","CurrentUserContext","App","useState","isEditAvatarPopupOpened","setIsEditAvatarPopupOpened","isEditProfilePopupOpened","setIsEditProfilePopupOpened","isAddCardPopupOpened","setIsAddCardPopupOpened","isDeleteCardPopupOpened","setIsDeleteCardPopupOpened","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","handleEditAvatarClick","handleEditProfileClick","handleAddCardClick","handleCardClick","card","handleDeleteCardClick","handleUpdateAvatar","avatar","updateAvatar","then","userData","catch","error","console","log","handleEditProfile","user","updateUserInfo","handleAddPlaceSubmit","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","likeCard","state","map","c","handleDeletePlaceSubmit","event","deleteCard","target","filter","closeAllPopups","useEffect","Promise","all","getUserInfo","getInitialCards","cardData"],"mappings":"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","sourcesContent":["import React from 'react';\nimport api from '../utils/api.js';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport DeletePlacePopup from './DeletePlacePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from './../contexts/CurrentUserContext.js';\n\nfunction App() {\n  const [isEditAvatarPopupOpened, setIsEditAvatarPopupOpened] = React.useState(false);\n  const [isEditProfilePopupOpened, setIsEditProfilePopupOpened] = React.useState(false);\n  const [isAddCardPopupOpened, setIsAddCardPopupOpened] = React.useState(false);\n  const [isDeleteCardPopupOpened, setIsDeleteCardPopupOpened] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  \n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpened(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpened(true);\n  }\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpened(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleDeleteCardClick() {\n    setIsDeleteCardPopupOpened(true);\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditAvatarPopupOpened(false);\n    })\n    .catch((error) => console.log(error));;\n  }\n\n  function handleEditProfile(user) {\n    api.updateUserInfo(user)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditProfilePopupOpened(false);\n    })\n    .catch((error) => console.log(error));;\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addNewCard(card)\n    .then ((newCard) => {\n      setCards([newCard, ...cards]);\n      setIsAddCardPopupOpened(false);\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.likeCard(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function handleDeletePlaceSubmit(event, card) {   \n    api.deleteCard(event.target.card._id)\n      .then((newCard) => {\n        setCards((cards) => cards.filter((c) => c._id !== card._id))\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function closeAllPopups () {\n    setIsEditAvatarPopupOpened(false);\n    setIsEditProfilePopupOpened(false);\n    setIsAddCardPopupOpened(false);\n    setIsDeleteCardPopupOpened(false);\n    setSelectedCard({});\n  }\n\n  React.useEffect(() => {\n    Promise.all([ \n      api.getUserInfo(),\n      api.getInitialCards()\n    ])\n      .then(([userData, cardData]) => {\n        setCurrentUser(userData);\n        setCards(cardData);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  return (\n    <div className=\"page\">\n      <div className=\"page-container\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header />\n          <Main\n            cards={cards}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddCard={handleAddCardClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleDeleteCardClick}\n          />\n          <EditAvatarPopup \n            isOpen={isEditAvatarPopupOpened} \n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar} \n          /> \n          <EditProfilePopup \n            isOpen={isEditProfilePopupOpened} \n            onClose={closeAllPopups}\n            onEditProfile={handleEditProfile} \n          />\n          <AddPlacePopup \n            isOpen={isAddCardPopupOpened} \n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit} \n          />\n          <DeletePlacePopup \n            isOpen={isDeleteCardPopupOpened} \n            onClose={closeAllPopups}\n            onDeletePlace={handleDeletePlaceSubmit}\n          />\n          <ImagePopup\n            name='preview-card'\n            card={selectedCard}\n            onClose={closeAllPopups}\n          />\n          <Footer />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}