{"ast":null,"code":"import _toConsumableArray from\"/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import api from'../utils/api.js';import Header from'./Header.js';import Main from'./Main.js';import EditAvatarPopup from'./EditAvatarPopup.js';import EditProfilePopup from'./EditProfilePopup.js';import AddPlacePopup from'./AddPlacePopup.js';import DeletePlacePopup from'./DeletePlacePopup.js';import ImagePopup from'./ImagePopup.js';import Footer from'./Footer.js';import{CurrentUserContext}from'./../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpened=_React$useState2[0],setIsEditAvatarPopupOpened=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpened=_React$useState4[0],setIsEditProfilePopupOpened=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddCardPopupOpened=_React$useState6[0],setIsAddCardPopupOpened=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),cardToDelete=_React$useState10[0],setCardToDelete=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];function handleEditAvatarClick(){setIsEditAvatarPopupOpened(true);}function handleEditProfileClick(){setIsEditProfilePopupOpened(true);}function handleAddCardClick(){setIsAddCardPopupOpened(true);}function handleCardClick(card){setSelectedCard(card);}function handleDeleteCardClick(card){setCardToDelete(card);}function handleUpdateAvatar(avatar){api.updateAvatar(avatar).then(function(userData){setCurrentUser(userData);setIsEditAvatarPopupOpened(false);}).catch(function(error){return console.log(error);});}function handleEditProfile(user){api.updateUserInfo(user).then(function(userData){setCurrentUser(userData);setIsEditProfilePopupOpened(false);}).catch(function(error){return console.log(error);});}function handleAddPlaceSubmit(card){api.addNewCard(card).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));setIsAddCardPopupOpened(false);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(error){return console.log(error);});}function handleDeletePlaceSubmit(card){api.deleteCard(card._id).then(function(newCard){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});setCardToDelete(null);}).catch(function(error){return console.log(error);});}function closeAllPopups(){setIsEditAvatarPopupOpened(false);setIsEditProfilePopupOpened(false);setIsAddCardPopupOpened(false);setCardToDelete(null);setSelectedCard(false);}React.useEffect(function(){Promise.all([api.getUserInfo(),api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),userData=_ref2[0],cardData=_ref2[1];setCurrentUser(userData);setCards(cardData);}).catch(function(error){return console.log(error);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddCard:handleAddCardClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteCardClick}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpened,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpened,onClose:closeAllPopups,onEditProfile:handleEditProfile}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddCardPopupOpened,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(DeletePlacePopup,{isOpen:!!cardToDelete,onClose:closeAllPopups,onDeletePlace:handleDeletePlaceSubmit,card:cardToDelete}),/*#__PURE__*/_jsx(ImagePopup,{name:\"preview-card\",onClose:closeAllPopups,card:selectedCard}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"sources":["/Users/tatananovikova/Desktop/praktikum/react-mesto-auth/src/components/App.js"],"names":["React","api","Header","Main","EditAvatarPopup","EditProfilePopup","AddPlacePopup","DeletePlacePopup","ImagePopup","Footer","CurrentUserContext","App","useState","isEditAvatarPopupOpened","setIsEditAvatarPopupOpened","isEditProfilePopupOpened","setIsEditProfilePopupOpened","isAddCardPopupOpened","setIsAddCardPopupOpened","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","currentUser","setCurrentUser","cards","setCards","handleEditAvatarClick","handleEditProfileClick","handleAddCardClick","handleCardClick","card","handleDeleteCardClick","handleUpdateAvatar","avatar","updateAvatar","then","userData","catch","error","console","log","handleEditProfile","user","updateUserInfo","handleAddPlaceSubmit","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","state","map","c","handleDeletePlaceSubmit","deleteCard","filter","closeAllPopups","useEffect","Promise","all","getUserInfo","getInitialCards","cardData"],"mappings":"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","sourcesContent":["import React from 'react';\nimport api from '../utils/api.js';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport DeletePlacePopup from './DeletePlacePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from './../contexts/CurrentUserContext.js';\n\nfunction App() {\n  const [isEditAvatarPopupOpened, setIsEditAvatarPopupOpened] = React.useState(false);\n  const [isEditProfilePopupOpened, setIsEditProfilePopupOpened] = React.useState(false);\n  const [isAddCardPopupOpened, setIsAddCardPopupOpened] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cardToDelete, setCardToDelete] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpened(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpened(true);\n  }\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpened(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleDeleteCardClick(card) {\n    setCardToDelete(card);\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditAvatarPopupOpened(false);\n    })\n    .catch((error) => console.log(error));\n  }\n\n  function handleEditProfile(user) {\n    api.updateUserInfo(user)\n    .then((userData) => {\n      setCurrentUser(userData);\n      setIsEditProfilePopupOpened(false);\n    })\n    .catch((error) => console.log(error));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addNewCard(card)\n    .then ((newCard) => {\n      setCards([newCard, ...cards]);\n      setIsAddCardPopupOpened(false);\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => \n          state.map((c) => \n            c._id === card._id ? newCard : c))\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function handleDeletePlaceSubmit(card) {\n    api.deleteCard(card._id)\n      .then((newCard) => {\n        setCards((cards) => \n          cards.filter((c) => \n            c._id !== card._id))\n        setCardToDelete(null);\n      })\n      .catch((error) => console.log(error));\n  }\n\n  function closeAllPopups () {\n    setIsEditAvatarPopupOpened(false);\n    setIsEditProfilePopupOpened(false);\n    setIsAddCardPopupOpened(false);\n    setCardToDelete(null);\n    setSelectedCard(false);\n  }\n\n  React.useEffect(() => {\n    Promise.all([ \n      api.getUserInfo(),\n      api.getInitialCards()\n      ])\n      .then(([userData, cardData]) => {\n        setCurrentUser(userData);\n        setCards(cardData);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  return (\n    <div className=\"page\">\n      <div className=\"page-container\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header />\n          <Main\n            cards={cards}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddCard={handleAddCardClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleDeleteCardClick}\n          />\n          <EditAvatarPopup \n            isOpen={isEditAvatarPopupOpened} \n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar} \n          /> \n          <EditProfilePopup \n            isOpen={isEditProfilePopupOpened} \n            onClose={closeAllPopups}\n            onEditProfile={handleEditProfile}\n          />\n          <AddPlacePopup \n            isOpen={isAddCardPopupOpened} \n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <DeletePlacePopup \n            isOpen={!!cardToDelete} \n            onClose={closeAllPopups}\n            onDeletePlace={handleDeletePlaceSubmit}\n            card={cardToDelete}\n          />\n          <ImagePopup\n            name='preview-card'\n            onClose={closeAllPopups}\n            card={selectedCard}\n          />\n          <Footer />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}